<html>
<title>Example file upload</title>
<head>
<script type="text/javascript">
    var djConfig = {
        isDebug: false,
        parseOnLoad: true,
        baseUrl: './',
        modulePaths: { 'Hark': '.',
           'unc': 'unc'  
        },
        dojoBlankHtmlUrl: 'blank.html'
    };
</script>
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/dojo/1.5/dojo/dojo.xd.js"></script>
<script type="text/javascript" src="/libs/uow/trace.js"></script>
<script type="text/javascript" src="/libs/uow.js"></script>
<script type = "text/javascript">
    function form() {
        var form = dojo.create("form",{method:"POST", enctype:"multipart/form-data"},dojo.body());
        var label1 = dojo.create("label",{innerHTML:"Text: "},form);
        var text = dojo.create("input",null,form);
        var label2 = dojo.create("label",{innerHTML:"Picture"},form);
        var file = dojo.create("input",{type:"file"},form);
        var button = dojo.create("button",{innerHTML:"Submit"},dojo.body());
        dojo.connect(button,'onclick',dojo.hitch(this,submit,form));
    }
    function submit(aForm) {
        var def = uow.getDatabase({
            database: 'Media',
            collection: 'Images',
            mode: 'c' });
        def.addCallback(function(db) {
            db.upload({
                form: aForm,
                load: function(data, ioArgs) {
                    console.log('load', data);
                },
                error: function(msg, ioArgs) {
                    console.log('error', msg);
                }
            });
        });
    }
    
    dojo.addOnLoad(form);
</script>
</head>
<body>
</body>
</html>